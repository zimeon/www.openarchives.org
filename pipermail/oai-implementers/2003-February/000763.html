<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OAI-implementers] XML encoding problems with DSpace at MIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:hussein%40vt.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000767.html">
   <LINK REL="Next"  HREF="000764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OAI-implementers] XML encoding problems with DSpace at MIT
   </H1>
    <B>Hussein Suleman
    </B> 
    <A HREF="mailto:hussein%40vt.edu"
       TITLE="[OAI-implementers] XML encoding problems with DSpace at MIT">hussein@vt.edu
       </A><BR>
    <I>Sat, 15 Feb 2003 17:31:36 +0200</I>
    <P><UL>
        <LI> Previous message: <A HREF="000767.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
        <LI> Next message: <A HREF="000764.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#763">[ date ]</a>
              <a href="thread.html#763">[ thread ]</a>
              <a href="subject.html#763">[ subject ]</a>
              <a href="author.html#763">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi

i think Tim poses a very relevant question: do we deal with the
so-called &quot;real-world&quot; encoding problems or do we try to encourage
people to fix their implementations? (of course, for research purposes,
we may end up doing both :))

personally, the code i distribute to others does quite a lot of XML
cleaning in the data provider, but none at all in the harvester. i think
the basic philosophy i'm following is: clean data as close to the source
as possible. also, i believe one of the reasons the adminEmail field in
Identify responses is required is so that a service provider can contact
the administrator if there are problems with the data.

and now that the hype about OAI2 is dying down, i wonder how much (if
any) more testing we need. i have some ideas to enhance, complement and
possibly even replace the repository explorer in the next year ... it
all depends on finding time and/or students/colleagues with time :)

ttfn,
----hussein


Tim Brody wrote:
 &gt; 
<A HREF="http://celestial.eprints.org/cgi-bin/status?action=repository;metadataFormat=17">http://celestial.eprints.org/cgi-bin/status?action=repository;metadataFormat=17</A> 

 &gt;
 &gt;
 &gt; Harvested 752 records - I've also implemented some
 &gt; character-substitution to fix encoding errors, although this is probably
 &gt; not as proficient as Simeon's!
 &gt;
 &gt; The question is, the more harvesters implement fixes the less pressure
 &gt; there is on repositories to fix their output, so should harvesters
 &gt; accept bad-XML?
 &gt; (once that question is answered, harvesters have to decide how much
 &gt; normalisation of metadata they do :-)
 &gt;
 &gt; All the best,
 &gt; Tim.
 &gt;
 &gt; Simeon Warner wrote:
 &gt;
 &gt;&gt; In my recent post to oai-general
 &gt;&gt; 
<A HREF="http://www.openarchives.org/pipermail/oai-general/2003-February/000258.html">http://www.openarchives.org/pipermail/oai-general/2003-February/000258.html</A>
 &gt;&gt;
 &gt;&gt; I said I'd post a note about the current output of DSpace at MIT to this
 &gt;&gt; list (which seems a more appropriate forum). I just ran a harvest 
and got
 &gt;&gt; the log shown below, I've added comments in [].
 &gt;&gt;
 &gt;&gt; Cheers,
 &gt;&gt; Simeon.
 &gt;&gt;
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;more log oaiharvest.pl: Harvest from
 &gt;&gt; <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> using POST
 &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args: verb=Identify
 &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
 &gt;&gt; OAIGet: Got 200 OK (627bytes decoded to 1328bytes)
 &gt;&gt;
 &gt;&gt; [nice, DSpace implements gzip content coding]
 &gt;&gt;
 &gt;&gt; oaiharvest.pl: Identify reports OAI-PMH version 2.0
 &gt;&gt; oaiharvest.pl: Doing complete harvest.
 &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args:
 &gt;&gt; verb=ListMetadataFormats
 &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
 &gt;&gt; OAIGet: Got 200 OK (307bytes decoded to 643bytes)
 &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args: verb=ListSets
 &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
 &gt;&gt; OAIGet: Got 200 OK (715bytes decoded to 2140bytes)
 &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args:
 &gt;&gt; metadataPrefix=oai_dc&amp;verb=ListRecords
 &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
 &gt;&gt; OAIGet: Got 200 OK (254096bytes decoded to 1392720bytes)
 &gt;&gt; oaiharvest.pl: UTF-8/XML errors in ListRecords.1:
 &gt;&gt;
 &gt;&gt; [oops, expat parser fails on response
 &gt;&gt;  my harvester now attempts to do replacement on bad XML/UTF8 bytes/chars
 &gt;&gt;  using my utf8conditioner, details at
 &gt;&gt;  <A HREF="http://www.cs.cornell.edu/people/simeon/software/utf8conditioner/">http://www.cs.cornell.edu/people/simeon/software/utf8conditioner/</A>
 &gt;&gt;  Unless the response can be parsed we can't even know if there is a
 &gt;&gt;  resumptionToken...]
 &gt;&gt; utf8conditioner: Line 320, char 81453, byte 81491: code not allowed in
 &gt;&gt; XML: 0x000C, substituted 0x3F
 &gt;&gt; Line 324, char 81713, byte 81751: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1839, char 559834, byte 559890: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1840, char 559919, byte 559975: code not allowed in XML: 0x000C,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1843, char 560213, byte 560269: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1846, char 560475, byte 560531: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1850, char 560807, byte 560863: code not allowed in XML: 0x000C,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 1851, char 560911, byte 560967: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2249, char 658132, byte 658188: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2250, char 658230, byte 658286: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2253, char 658449, byte 658505: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2271, char 662207, byte 662263: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2274, char 662411, byte 662467: code not allowed in XML: 0x000E,
 &gt;&gt; substituted 0x3F
 &gt;&gt; Line 2287, char 663373, byte 663429: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt;
 &gt;&gt; [utf8conditioner detected and did replacements for a number of
 &gt;&gt; characeters]
 &gt;&gt; oaiharvest.pl: Got 752 records (running total: 752)
 &gt;&gt; oaiharvest.pl: No resumptionToken, end of complete list.
 &gt;&gt;
 &gt;&gt; [expat could then parse response extracting 752 records, no
 &gt;&gt; resumptionToken]
 &gt;&gt;
 &gt;&gt; oaiharvest.pl: Done.
 &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; [doing the same tests with Xerces...]
 &gt;&gt;
 &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;xercesCountElements lr
 &gt;&gt; [Fatal Error] lr:320:76: An invalid XML character (Unicode: 0xc) was
 &gt;&gt; found in the element content of the document.
 &gt;&gt;
 &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;cat lr | utf8conditioner -x &gt; lrc
 &gt;&gt; Line 320, char 81453, byte 81491: code not allowed in XML: 0x000C,
 &gt;&gt; substituted 0x3F
 &gt;&gt; [..etc, same output as above...]
 &gt;&gt; Line 2287, char 663373, byte 663429: code not allowed in XML: 0x000B,
 &gt;&gt; substituted 0x3F
 &gt;&gt;
 &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;xercesCountElements lrc
 &gt;&gt; lrc: 4665;519;10 ms (18104 elems, 3013 attrs, 0 spaces, 740197 chars)
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; _______________________________________________
 &gt;&gt; OAI-implementers mailing list
 &gt;&gt; <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
 &gt;&gt; <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>
 &gt;&gt;
 &gt;
 &gt; _______________________________________________
 &gt; OAI-implementers mailing list
 &gt; <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
 &gt; <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>


-- 
=====================================================================
hussein suleman ~ <A HREF="mailto:hussein@cs.uct.ac.za">hussein@cs.uct.ac.za</A> ~ <A HREF="http://www.husseinsspace.com">http://www.husseinsspace.com</A>
=====================================================================



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000767.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
	<LI> Next message: <A HREF="000764.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#763">[ date ]</a>
              <a href="thread.html#763">[ thread ]</a>
              <a href="subject.html#763">[ subject ]</a>
              <a href="author.html#763">[ author ]</a>
         </LI>
       </UL>
</body></html>
