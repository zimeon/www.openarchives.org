<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OAI-implementers] XML encoding problems with DSpace at MIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:liu_x%40cs.odu.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000764.html">
   <LINK REL="Next"  HREF="000769.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OAI-implementers] XML encoding problems with DSpace at MIT
   </H1>
    <B>Xiaoming Liu
    </B> 
    <A HREF="mailto:liu_x%40cs.odu.edu"
       TITLE="[OAI-implementers] XML encoding problems with DSpace at MIT">liu_x@cs.odu.edu
       </A><BR>
    <I>Sat, 15 Feb 2003 20:28:32 -0500 (EST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="000764.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
        <LI> Next message: <A HREF="000769.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#765">[ date ]</a>
              <a href="thread.html#765">[ thread ]</a>
              <a href="subject.html#765">[ subject ]</a>
              <a href="author.html#765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a list of parsing errors from arc's recent harvest.

<A HREF="http://arc.cs.odu.edu/stat/parserror.txt">http://arc.cs.odu.edu/stat/parserror.txt</A>

In summary, about 140 records from 10 archives did not pass the xerces
parser. This result is far from complete or accurate, and some of them
might be our mistakes.

regards,
liu



On Sat, 15 Feb 2003, Caroline Arms wrote:

&gt;<i>
</I>&gt;<i> As a data provider, LC would like to know if it is generating invalid
</I>&gt;<i> characters.  The gradual migration to UNICODE is going to give us all
</I>&gt;<i> problems, in part BECAUSE some systems work so hard to recognize different
</I>&gt;<i> character encodings and adjust.  I'm with Hussein.  Notify data providers
</I>&gt;<i> of problems (even if you do adjust) so that the problem can be fixed as
</I>&gt;<i> close to home as possible.
</I>&gt;<i>
</I>&gt;<i> As a related aside, if anyone has a suggestion for an efficient way
</I>&gt;<i> (preferably unix-based) to check that the metadata in a PDF file is stored
</I>&gt;<i> in UTF-8 encoding (or consistently in any other UNICODE encoding), I'd be
</I>&gt;<i> interested.
</I>&gt;<i>
</I>&gt;<i> Caroline Arms
</I>&gt;<i> Office of Strategic Initiatives
</I>&gt;<i> Library of Congress
</I>&gt;<i>
</I>&gt;<i> On Sat, 15 Feb 2003, Hussein Suleman wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; hi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; i think Tim poses a very relevant question: do we deal with the
</I>&gt;<i> &gt; so-called &quot;real-world&quot; encoding problems or do we try to encourage
</I>&gt;<i> &gt; people to fix their implementations? (of course, for research purposes,
</I>&gt;<i> &gt; we may end up doing both :))
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; personally, the code i distribute to others does quite a lot of XML
</I>&gt;<i> &gt; cleaning in the data provider, but none at all in the harvester. i think
</I>&gt;<i> &gt; the basic philosophy i'm following is: clean data as close to the source
</I>&gt;<i> &gt; as possible. also, i believe one of the reasons the adminEmail field in
</I>&gt;<i> &gt; Identify responses is required is so that a service provider can contact
</I>&gt;<i> &gt; the administrator if there are problems with the data.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and now that the hype about OAI2 is dying down, i wonder how much (if
</I>&gt;<i> &gt; any) more testing we need. i have some ideas to enhance, complement and
</I>&gt;<i> &gt; possibly even replace the repository explorer in the next year ... it
</I>&gt;<i> &gt; all depends on finding time and/or students/colleagues with time :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ttfn,
</I>&gt;<i> &gt; ----hussein
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Tim Brody wrote:
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt; <A HREF="http://celestial.eprints.org/cgi-bin/status?action=repository;metadataFormat=17">http://celestial.eprints.org/cgi-bin/status?action=repository;metadataFormat=17</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt; Harvested 752 records - I've also implemented some
</I>&gt;<i> &gt;  &gt; character-substitution to fix encoding errors, although this is probably
</I>&gt;<i> &gt;  &gt; not as proficient as Simeon's!
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt; The question is, the more harvesters implement fixes the less pressure
</I>&gt;<i> &gt;  &gt; there is on repositories to fix their output, so should harvesters
</I>&gt;<i> &gt;  &gt; accept bad-XML?
</I>&gt;<i> &gt;  &gt; (once that question is answered, harvesters have to decide how much
</I>&gt;<i> &gt;  &gt; normalisation of metadata they do :-)
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt; All the best,
</I>&gt;<i> &gt;  &gt; Tim.
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt; Simeon Warner wrote:
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt;&gt; In my recent post to oai-general
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt; <A HREF="http://www.openarchives.org/pipermail/oai-general/2003-February/000258.html">http://www.openarchives.org/pipermail/oai-general/2003-February/000258.html</A>
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; I said I'd post a note about the current output of DSpace at MIT to this
</I>&gt;<i> &gt;  &gt;&gt; list (which seems a more appropriate forum). I just ran a harvest
</I>&gt;<i> &gt; and got
</I>&gt;<i> &gt;  &gt;&gt; the log shown below, I've added comments in [].
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; Cheers,
</I>&gt;<i> &gt;  &gt;&gt; Simeon.
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;more log oaiharvest.pl: Harvest from
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> using POST
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args: verb=Identify
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Got 200 OK (627bytes decoded to 1328bytes)
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; [nice, DSpace implements gzip content coding]
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: Identify reports OAI-PMH version 2.0
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: Doing complete harvest.
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args:
</I>&gt;<i> &gt;  &gt;&gt; verb=ListMetadataFormats
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Got 200 OK (307bytes decoded to 643bytes)
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args: verb=ListSets
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Got 200 OK (715bytes decoded to 2140bytes)
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Doing POST to <A HREF="http://hpds1.mit.edu/oai/">http://hpds1.mit.edu/oai/</A> args:
</I>&gt;<i> &gt;  &gt;&gt; metadataPrefix=oai_dc&amp;verb=ListRecords
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Note - Got Content-Encoding 'gzip', decoded with 'gunzip -c'
</I>&gt;<i> &gt;  &gt;&gt; OAIGet: Got 200 OK (254096bytes decoded to 1392720bytes)
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: UTF-8/XML errors in ListRecords.1:
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; [oops, expat parser fails on response
</I>&gt;<i> &gt;  &gt;&gt;  my harvester now attempts to do replacement on bad XML/UTF8 bytes/chars
</I>&gt;<i> &gt;  &gt;&gt;  using my utf8conditioner, details at
</I>&gt;<i> &gt;  &gt;&gt;  <A HREF="http://www.cs.cornell.edu/people/simeon/software/utf8conditioner/">http://www.cs.cornell.edu/people/simeon/software/utf8conditioner/</A>
</I>&gt;<i> &gt;  &gt;&gt;  Unless the response can be parsed we can't even know if there is a
</I>&gt;<i> &gt;  &gt;&gt;  resumptionToken...]
</I>&gt;<i> &gt;  &gt;&gt; utf8conditioner: Line 320, char 81453, byte 81491: code not allowed in
</I>&gt;<i> &gt;  &gt;&gt; XML: 0x000C, substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 324, char 81713, byte 81751: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1839, char 559834, byte 559890: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1840, char 559919, byte 559975: code not allowed in XML: 0x000C,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1843, char 560213, byte 560269: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1846, char 560475, byte 560531: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1850, char 560807, byte 560863: code not allowed in XML: 0x000C,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 1851, char 560911, byte 560967: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2249, char 658132, byte 658188: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2250, char 658230, byte 658286: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2253, char 658449, byte 658505: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2271, char 662207, byte 662263: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2274, char 662411, byte 662467: code not allowed in XML: 0x000E,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; Line 2287, char 663373, byte 663429: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; [utf8conditioner detected and did replacements for a number of
</I>&gt;<i> &gt;  &gt;&gt; characeters]
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: Got 752 records (running total: 752)
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: No resumptionToken, end of complete list.
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; [expat could then parse response extracting 752 records, no
</I>&gt;<i> &gt;  &gt;&gt; resumptionToken]
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; oaiharvest.pl: Done.
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; [doing the same tests with Xerces...]
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;xercesCountElements lr
</I>&gt;<i> &gt;  &gt;&gt; [Fatal Error] lr:320:76: An invalid XML character (Unicode: 0xc) was
</I>&gt;<i> &gt;  &gt;&gt; found in the element content of the document.
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;cat lr | utf8conditioner -x &gt; lrc
</I>&gt;<i> &gt;  &gt;&gt; Line 320, char 81453, byte 81491: code not allowed in XML: 0x000C,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt; [..etc, same output as above...]
</I>&gt;<i> &gt;  &gt;&gt; Line 2287, char 663373, byte 663429: code not allowed in XML: 0x000B,
</I>&gt;<i> &gt;  &gt;&gt; substituted 0x3F
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:simeon@ice">simeon@ice</A> 14Feb03&gt;xercesCountElements lrc
</I>&gt;<i> &gt;  &gt;&gt; lrc: 4665;519;10 ms (18104 elems, 3013 attrs, 0 spaces, 740197 chars)
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;  &gt;&gt; OAI-implementers mailing list
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
</I>&gt;<i> &gt;  &gt;&gt; <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>
</I>&gt;<i> &gt;  &gt;&gt;
</I>&gt;<i> &gt;  &gt;
</I>&gt;<i> &gt;  &gt; _______________________________________________
</I>&gt;<i> &gt;  &gt; OAI-implementers mailing list
</I>&gt;<i> &gt;  &gt; <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
</I>&gt;<i> &gt;  &gt; <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; =====================================================================
</I>&gt;<i> &gt; hussein suleman ~ <A HREF="mailto:hussein@cs.uct.ac.za">hussein@cs.uct.ac.za</A> ~ <A HREF="http://www.husseinsspace.com">http://www.husseinsspace.com</A>
</I>&gt;<i> &gt; =====================================================================
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; OAI-implementers mailing list
</I>&gt;<i> &gt; <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
</I>&gt;<i> &gt; <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OAI-implementers mailing list
</I>&gt;<i> <A HREF="mailto:OAI-implementers@oaisrv.nsdl.cornell.edu">OAI-implementers@oaisrv.nsdl.cornell.edu</A>
</I>&gt;<i> <A HREF="http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers">http://oaisrv.nsdl.cornell.edu/mailman/listinfo/oai-implementers</A>
</I>&gt;<i>
</I>
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000764.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
	<LI> Next message: <A HREF="000769.html">[OAI-implementers] XML encoding problems with DSpace at MIT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#765">[ date ]</a>
              <a href="thread.html#765">[ thread ]</a>
              <a href="subject.html#765">[ subject ]</a>
              <a href="author.html#765">[ author ]</a>
         </LI>
       </UL>
</body></html>
