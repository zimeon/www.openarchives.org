<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OAI-implementers] character vs entity references
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:thabing%40uiuc.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="001106.html">
   <LINK REL="Next"  HREF="001108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OAI-implementers] character vs entity references
   </H1>
    <B>Thomas G. Habing
    </B> 
    <A HREF="mailto:thabing%40uiuc.edu"
       TITLE="[OAI-implementers] character vs entity references">thabing@uiuc.edu
       </A><BR>
    <I>Wed, 05 Nov 2003 12:30:52 -0600</I>
    <P><UL>
        <LI> Previous message: <A HREF="001106.html">[OAI-implementers] character vs entity references
</A></li>
        <LI> Next message: <A HREF="001108.html">[OAI-implementers] character vs entity references
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1107">[ date ]</a>
              <a href="thread.html#1107">[ thread ]</a>
              <a href="subject.html#1107">[ subject ]</a>
              <a href="author.html#1107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Heinrich Stamerjohanns wrote:

&gt;<i> On Wed, 5 Nov 2003, Tim Brody wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>AFAIK a character reference is a reference into the Unicode character set,
</I>&gt;&gt;<i>so its invalid whether its in &amp;#xx; form, utf-8, utf16 or whatever.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> I do not know what you exactly mean by that, but &quot;&amp;#241;&quot; is certainly a
</I>&gt;<i> correct character reference. The byte presentation of characters
</I>&gt;<i> above 127 is just different (ISO-8859-1:1 byte, UTF-8:more bytes),
</I>&gt;<i> but the character-reference &amp;#241 represents the same character in
</I>&gt;<i> XML(iso-8859-1) and XML(UTF-8).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i>You should either remove the characters or convert the character to its
</I>&gt;&gt;<i>nearest equivalent in Unicode (for control characters there probably isn't
</I>&gt;&gt;<i>one).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I remove invalid characters with this (PHP code with perlregex):
</I>&gt;<i> // just remove invalid control characters
</I>&gt;<i> $pattern =&quot;/[\x-\x8\xb-\xc\xe-\x1f]/&quot;;
</I>&gt;<i> $string = preg_replace($pattern,'',$string);
</I>&gt;<i> 
</I>&gt;<i> Heinrich
</I>&gt;<i> 
</I>&gt;<i> 
</I>
You need to be careful of characters in the x7F-x9F range.  In Unicode these 
are all control characters and are forbidden in XML 1.0.  But in many 
charsets these points are occupied by printable characters, such as in the 
Windows:Western charset where, for example, x8A is the S with caron, but in 
  Unicode this needs to be converted to x160.  If you just took this 
character and turned it into entity &amp;#x8A; the resulting XML would not be valid.

-- 
Thomas Habing
Research Programmer, Digital Library Projects
University of Illinois at Urbana-Champaign
155 Grainger Engineering Library Information Center, MC-274
<A HREF="mailto:thabing@uiuc.edu">thabing@uiuc.edu</A>, (217) 244-4425
<A HREF="http://dli.grainger.uiuc.edu">http://dli.grainger.uiuc.edu</A>


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="001106.html">[OAI-implementers] character vs entity references
</A></li>
	<LI> Next message: <A HREF="001108.html">[OAI-implementers] character vs entity references
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1107">[ date ]</a>
              <a href="thread.html#1107">[ thread ]</a>
              <a href="subject.html#1107">[ subject ]</a>
              <a href="author.html#1107">[ author ]</a>
         </LI>
       </UL>
</body></html>
