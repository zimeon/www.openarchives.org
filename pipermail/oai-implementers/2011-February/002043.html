<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [OAI-implementers] ListRecords request w/out an until..
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:oai-implementers%40openarchives.org?Subject=%5BOAI-implementers%5D%20ListRecords%20request%20w/out%20an%20until..&In-Reply-To=AANLkTimGn9-kzrS7tO9Jc-MbFDLNZRKDE_czUoiuKjti%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002042.html">
   <LINK REL="Next"  HREF="002044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OAI-implementers] ListRecords request w/out an until..</H1>
    <B>Simeon Warner</B> 
    <A HREF="mailto:oai-implementers%40openarchives.org?Subject=%5BOAI-implementers%5D%20ListRecords%20request%20w/out%20an%20until..&In-Reply-To=AANLkTimGn9-kzrS7tO9Jc-MbFDLNZRKDE_czUoiuKjti%40mail.gmail.com"
       TITLE="[OAI-implementers] ListRecords request w/out an until..">simeon.warner at cornell.edu
       </A><BR>
    <I>Tue Feb  1 10:05:24 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002042.html">[OAI-implementers] ListRecords request w/out an until..
</A></li>
        <LI>Next message: <A HREF="002044.html">[OAI-implementers] ListRecords request w/out an until..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2043">[ date ]</a>
              <a href="thread.html#2043">[ thread ]</a>
              <a href="subject.html#2043">[ subject ]</a>
              <a href="author.html#2043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ben,

This is covered in the in section 3.5.1 of the specification:

<A HREF="http://www.openarchives.org/OAI/2.0/openarchivesprotocol.htm#Idempotency">http://www.openarchives.org/OAI/2.0/openarchivesprotocol.htm#Idempotency</A>

I think your solution for the harvester is the correct one. Provided the 
harvester starts again with from=t0 all changes between t0 and t2 will be 
harvested, irrespective of whether or not they were included in the original 
response (modulo understood problems with items that move between sets for set 
selective requests).

Cheers,
Simeon

On 02/01/2011 09:09 AM, Benjamin Anderson wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I'm wondering what others are doing when a ListRecords request w/out an
</I>&gt;<i> until comes in.&#65533; Consider this scenario:
</I>&gt;<i>
</I>&gt;<i> t0 - harvest request (with no until) is initiated
</I>&gt;<i> t1 - record 101 is added to the repo
</I>&gt;<i> t2 - harvest is finished (it took multiple requests to complete)
</I>&gt;<i>
</I>&gt;<i> Should record 101 be included in the harvest data?&#65533; If not, will the
</I>&gt;<i> client better issue their next harvest with a from=t0 (a from=t2 would
</I>&gt;<i> be invalid because they'd miss out on record 101).
</I>&gt;<i>
</I>&gt;<i> We have implemented both oai-pmh harvesters and providers, so I have to
</I>&gt;<i> consider both ends of this.&#65533; Here's what I'm thinking...
</I>&gt;<i>
</I>&gt;<i> As a Provider
</I>&gt;<i> I will simply lock the repo so that the above scenario can't happen.&#65533; If
</I>&gt;<i> someone is already harvesting (there exist unexpired resumptionTokens)
</I>&gt;<i> then I will not update the repository.
</I>&gt;<i>
</I>&gt;<i> As a Harvester
</I>&gt;<i> I will always use the until parameter with the value of the time the
</I>&gt;<i> harvest was initially started.
</I>&gt;<i>
</I>&gt;<i> I think this keeps me clear of any problems.&#65533; Anyone else have thoughts
</I>&gt;<i> or care to share your solutions?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Ben Anderson
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OAI-implementers mailing list
</I>&gt;<i> List information, archives, preferences and to unsubscribe:
</I>&gt;<i> <A HREF="http://www.openarchives.org/mailman/listinfo/oai-implementers">http://www.openarchives.org/mailman/listinfo/oai-implementers</A>
</I>&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002042.html">[OAI-implementers] ListRecords request w/out an until..
</A></li>
	<LI>Next message: <A HREF="002044.html">[OAI-implementers] ListRecords request w/out an until..
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2043">[ date ]</a>
              <a href="thread.html#2043">[ thread ]</a>
              <a href="subject.html#2043">[ subject ]</a>
              <a href="author.html#2043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.openarchives.org/mailman/listinfo/oai-implementers">More information about the OAI-implementers
mailing list</a><br>
</body></html>
