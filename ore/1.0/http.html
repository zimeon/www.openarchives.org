<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>ORE User Guide - HTTP Implementation</title>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
<link rel="shortcut icon" href="http://www.openarchives.org/ore/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="http://www.openarchives.org/ore/1.0/ore-spec.css" type="text/css" />
</head>

<body>
<div id="header">
  <table class="layout" summary="Logos and OAI-ORE title">
    <tr>
      <td><img alt="OAI logo" src="/images/OA100.gif" width="100" height="70" /></td>
      <td class="OREtext">Open Archives Initiative<br />Object Reuse and Exchange</td>
      <td><img alt="ORE logo" src="/ore/logos/ore_logo_e_80.png" width="80" height="80" /></td>
    </tr>
  </table>
</div>
<div id="titleBlock">
  <h2 class="title">ORE User Guide - HTTP Implementation</h2>
  <h3 class="subTitle">17 October 2008</h3>
</div><!--div-titleBlock-->
<dl>
  <dt>This version:</dt>
  <dd><a href="http://www.openarchives.org/ore/1.0/http">http://www.openarchives.org/ore/1.0/http</a></dd>
  <dt>Latest version:</dt>
  <dd><a href="http://www.openarchives.org/ore/http">http://www.openarchives.org/ore/http</a></dd>
  <dt>Previous version:</dt>
  <dd><a href="http://www.openarchives.org/ore/0.9/http">http://www.openarchives.org/ore/0.9/http</a></dd>
</dl>
<dl class="EditorsContributors">
  <dt>Editors (OAI Executive)</dt>
  <dd>Carl Lagoze, Cornell University Information Science</dd>
  <dd>Herbert Van de Sompel, Los Alamos National Laboratory</dd>
  <dt>Editors (ORE Technical Committee)</dt>
  <dd>Pete Johnston, Eduserv Foundation</dd>
  <dd>Michael Nelson, Old Dominion University</dd>
  <dd>Robert Sanderson, University of Liverpool</dd>
  <dd>Simeon Warner, Cornell University Information Science</dd>
</dl>

<!--END-HEADER-->
<!--VAR-TITLE=ORE User Guide - HTTP Implementation-->
<!--VAR-SUBTITLE=17 October 2008-->
<!--VAR-THISURI=http://www.openarchives.org/ore/1.0/http-->
<!--VAR-LATESTURI=http://www.openarchives.org/ore/http-->
<!--VAR-PREVIOUSURI=http://www.openarchives.org/ore/0.9/http-->

<div class="abstract">

<h2><a name="abstract" id="abstract"></a>Abstract</h2>

<p>Open Archives Initiative Object Reuse and Exchange (OAI-ORE)
defines standards for the description and exchange of aggregations of
Web resources.  This document describes implementation of OAI-ORE
using HTTP [<a href="#ref-rfc2616">RFC2616</a>], the must widely used
protocol of the current World Wide Web. Mechanisms that support
multiple Resource Maps in different serializations, Splash Pages, and
Proxy URIs are described in detail.</p>

<p>This user guide is one of several documents comprising the <a
href="http://www.openarchives.org/ore/1.0/toc">OAI-ORE specifications
and user guides</a>. This document is intended for implementers who
have an understanding of ORE concepts. Readers seeking a high-level
understanding of the motivation for ORE, and of the solution it
provides, should read the <a href="primer">ORE Primer</a>.</p> </div>


<div class="toc">
<h2><a name="contents" id="contents"></a>Table of Contents</h2>
<p class="toc">1. <a href="#Introduction">Introduction</a><br />
2. <a href="#RedirectCN">Implementation using 303 redirection and content negotiation</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;2.1 <a href="#Multi">Multiple Resource Maps</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;2.2 <a href="#MultiSplash">Resource Maps and a Splash Page</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;2.3 <a href="#CN">Summary of recommended content negotiation behaviors</a><br />
3. <a href="#RedirectNoCN">Implementation using 303 redirection without content negotiation</a><br />
4. <a href="#Simple">Simple implementation using hash URIs</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;4.1 <a href="#SimpleMigration">Migration from hash URIs to support multiple Resource Maps</a><br />
5. <a href="#WithRDFa">Implementation with RDFa</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;5.1 <a href="#RedirectWithRDFa">RDFa with 303 redirection</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;5.2 <a href="#SimpleWithRDFa">RDFa with hash URIs</a><br />
6. <a href="#Proxy">Proxy URIs</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;6.1 <a href="#ProxyRequirements">Requirements for HTTP Proxy URIs</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;6.2 <a href="#oreproxy">ORE Proxy URI resolver at <code>http://oreproxy.org/r</code></a><br />
7. <a href="#Trust">Trust and Authority</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;7.1 <a href="#Authority">Authoritative Description</a><br />
8. <a href="#References">References</a><br />
</p>
<h3><a name="appendices" id="appendices"></a>Appendices</h3>
<p class="toc">A. <a href="#acknowledgments">Acknowledgements</a><br />
B. <a href="#mime">Common MIME types for Resource Maps and Splash Pages</a><br />
C. <a href="#http_examples">Example HTTP requests and responses</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;C.1 <a href="#http_cn">303 redirection with content negotiation</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;C.2 <a href="#http_nocn">303 redirection without content negotiation</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;C.3 <a href="#http_hash">Use of hash URIs</a><br />
D. <a href="#changelog">Change Log</a></p>
</div>
<hr />

<div class="body">
<h2>1. <a id="Introduction" name="Introduction">Introduction</a></h2>

<p>The use of HTTP URIs to identify ORE Aggregations and Resource Maps
leverages the extensive infrastructure and tools of the current World
Wide Web [<a href="#ref-awww">Web Architecture</a>]. HTTP is the
protocol best supported by web browsers, crawlers, search engines,
feed aggregators, etc., and is thus the RECOMMENDED protocol and
associated URI scheme for ORE Aggregations and Resource Maps.</p>

<p>An ORE <a href="datamodel#Aggregation">Aggregation</a> is a <i>set
of Aggregated Resources</i> [<a href="#ref-datamodel">Data Model</a>]
identified by a URI. An Aggregation is an <i>abstract construct</i>;
its <i>essential characteristics</i> cannot be conveyed as a web
document. Hence, no representation is available from the URI that
identifies an Aggregation. However, the Aggregation URI provides a way
to get a web document that describes the Aggregation: a Resource Map
available from another URI. This document describes how make the link
between Aggregation and Resource Map using HTTP and following the
strategies of <a href="#ref-CoolURIs">Cool URIs</a> and the <a
href="#ref-linked-data">Linked Data Tutorial</a>.</p>

<p>There may be one or more Resource Maps that describe a particular
Aggregation. Multiple Resource Maps will likely differ in their
serialization format and serialization specific metadata
(e.g. creation time), and are thus separate web documents identified
with different URIs (<code>ReM-1</code>, <code>ReM-2</code>, etc.).</p>

<p>In many application domains there are already many aggregations of
resources on the web. These are often described by human-readable HTML
pages, often called &quot;Splash Pages&quot;, such as <a
href="http://arxiv.org/abs/astro-ph/0601007">http://arxiv.org/abs/astro-ph/0601007</a>
which provide description of an aggregation and access to its
components. Typically, this approach does not provide a URI for the
concept of the aggregation &mdash; the URI of the Splash Page is not
the URI of the aggregation but rather of the HTML page. Nor does it
provide a machine-readable description of the aggregation. ORE solves
this problem by introducing a URI for the aggregation, and a
standardized way to described the boundary of the aggregation by means
of Resource Maps. Existing Splash Pages may accessed via the ORE
Aggregationn URI. With RDFa it is even possible to embed a Resource
Map in a Splash Page and this case is discussed below.</p>

<p>This document is divided into sections which describe different
HTTP implementation scenarios. These scenarios differ in the server
requirements needed to support them, and in the URI structure that
results:</p>

<ul>

<li><a href="#RedirectCN">Section 2</a> describes a clean and
extensible implementation strategy requiring HTTP server support to
implement 303 redirection and content negotiation. This is the
RECOMMENDED strategy.</li>

<li><a href="#RedirectNoCN">Section 3</a> describes
simpler use of 303 redirection for a single Resource Map.</li>

<li><a href="#Simple">Section 4</a> describes a limited but very simple
implementation strategy using hash URIs that requires no HTTP server
support beyond the ability to serve files.</li>

<li><a href="#WithRDFa">Section 5</a> describes implementation with RFDa 
(or microformats) either alone or in addition to other formats.</li>

<li><a href="#Proxy">Section 6</a> gives the recommended behavior of
HTTP Proxy URIs and details of the ORE Proxy URI resolver at
<code>http://oreproxy.org/r</code>.</li>

</ul>


<p><i>This document does not include guidance in the use of a generic 
resource (standing for a generic Resource Map) that supports content 
negotiation for different Resource Maps. These techniques are described 
in <a href="#ref-CoolURIs">Cool URIs</a> and may be used with ORE under 
certain conditions. Discussion will be included in an update to this
document.</i></p>


<h2>2. <a id="RedirectCN" name="RedirectCN">Implementation using 303
redirection and content negotiation</a></h2>

<p>This implementation strategy is the most flexible and is
RECOMMENDED in the following circumstances:</p>

<ul>
<li>Web server support for 303 redirection is available.</li>
<li>Web server support for content negotiation is available.</li>
<li>Support multiple Resource Maps is required.</li>
<li>Desire to integrate Splash Pages into the solution (<a href="#MultiSplash">section 2.2</a>).</li>
<li>Desire to allow easy extensibility to additional Resource Maps and/or Splash Pages.</li>
</ul>

<h3>2.1 <a id="Multi" name="Multi">Multiple Resource Maps</a></h3>

<p>Consider the case of two Resource Maps available to describe an
Aggregation, perhaps an Atom serialization and an RDF/XML
serialization. Each Resource Map MUST be available from a different
URI (<code>ReM-1</code> and <code>ReM-2</code>) but either SHOULD be
accessible via the Aggregation URI (<code>A-1</code>).  The server
responds to a request for <code>A-1</code> with a <code>303 See
Other</code> redirect to either <code>ReM-1</code> or
<code>ReM-2</code> depending upon MIME-type preferences expressed in
the request.  An example HTTP interaction is shown in <a
href="#http_cn">appendix C.2</a>. The figure below illustrates this
scenario in the case that the Atom Resource Map &quot;wins&quot; based
on client preferences (or default server behavior if no preferences
are given).</p>

<p class="figure"><img src="http-images/RedirectCN_1.png" alt="Diagram of 303 redirect
with content negotiation using Cool URIs" width="600" height="421" /></p>
<div class="exampleInner"><pre># Statements in ReM-1 (shown as red arrows)
ReM-1 ore:describes A-1.
A-1 ore:isDescribedBy ReM-2.   #discovery of ReM-2 from ReM-1

# Statements in ReM-2 (not shown in figure)
ReM-2 ore:describes A-1.
A-1 ore:isDescribedBy ReM-1.   #discovery of ReM-1 from ReM-2
</pre></div>

<p>The Aggregation and each Resource Map has a good URI. These URIs do
not have to be related in the manner shown above although this is one
logical and extensible arrangement. While the appropriate choice for a
given system will likely be influenced by other considerations, it
should not be forgotten that <em>"good URIs do not change"</em> [<a
href="#ref-uri-style">URI Style</a>] and that extension is often
required as systems evolve.</p>

<p>To aid in discovery of Resource Maps, it is RECOMMENDED that where
there are multiple Resource Maps available for an Aggregation, the
availability of other Resource Maps should be indicated using the
<code>ore:isDescribedBy</code> predicate (statements shown above).</p>

<p>This scheme is easily extended by adding new Resource Maps (with
URIs <code>ReM-3</code> etc.) or to support an HTML Splash Page (<a
href="#MultiSplash">section 2.2</a>). It is an implementation decision
as to which Resource Map is considered the default should no
preference information be sent by the client, or if the preferred
formats are not available. The most widely used serialization is
likely the best choice and at present that is Atom.</p>


<h3>2.2 <a id="MultiSplash" name="MultiSplash">Resource Maps and a
Splash Page</a></h3>

<p>If there is an HTML Splash Page (<code>S-1</code>) associated with
an Aggregation then 303 redirection allows this to be accessed via the
Aggregation alongside the Resource Maps. Thus human or machine
readable information about the Aggregation is provided according to
the client preference, following the recommendations of <a
href="#ref-CoolURIs">Cool URIs</a> and the <a
href="#ref-linked-data">Linked Data Tutorial</a>.</p>

<p>The figure below shows and Aggregation (<code>A-1</code>) with
an HTML Splash Page (<code>S-1</code>) and two Resource Maps 
(<code>ReM-1</code> and <code>ReM-2</code>).</p>
 
<p class="figure"><img src="http-images/RedirectCN_2.png" alt="Diagram multiple resource
maps and a splash page using 303 redirection with content
negotiation" width="600" height="430" /></p>
<div class="exampleInner"><pre># Statements in ReM-1 (shown as red arrows)
ReM-1 ore:describes A-1.
A-1 ore:isDescribedBy ReM-2.   #discovery of ReM-2 from ReM-1

# Statements in ReM-2 (not shown in figure)
ReM-2 ore:describes A-1.
A-1 ore:isDescribedBy ReM-1.   #discovery of ReM-1 from ReM-2

# In S-1 (shown as blue arrows)
&lt;link rel=&quot;resourcemap&quot; href=&quot;http://example.org/foo.atom&quot; type=&quot;application/atom+xml&quot; /&gt;
&lt;link rel=&quot;resourcemap&quot; href=&quot;http://example.org/foo.rdf&quot; type=&quot;application/rdf+xml&quot; /&gt;
</pre></div>

<p>The HTML Splash Page SHOULD include 
<a href="discovery#HTMLLinkElement">HTML &lt;link&gt; elements</a> for
discovery of the Resource Maps as shown in the figure, and MAY also
include <a href="discovery#HTTPLinkHeader">HTTP Link headers</a> [<a
href="#ref-discovery">Resource Map Discovery</a>]. Additionally, each
Resource Map SHOULD include <code>ore:isDescribedBy</code> predicates
to allow discovery of other Resource Maps (statements shown above). It
is an implementation choice as to whether the Splash Page is itself an
Aggregated Resource within the Aggregation.</p>

<p>If a client expresses no MIME-type preference, the default redirection
SHOULD be to a Resource Map and SHOULD NOT be to the Splash Page. Which
Resource Map is provided by default is an implementation decision; the
most widely used serialization available is likely the best choice.</p>

<h3>2.3 <a id="CN" name="CN">Summary of recommended content negotiation behaviors</a></h3>

<p>The specifications for content negotiation [<a
href="#ref-RFC2295">RFC2295</a>] provide considerable latitude for the
server to select the &quot;best variant&quot;. To promote
interoperability between ORE clients and servers the following
behaviors are RECOMMENDED. Example HTTP requests and responses are
shown in <a href="#http_cn">appendix C.1</a></p>

<h4>Recommended server behavior</h4>

<p>The following rules allow 303 redirection with content negotiation
to provide flexibility for advanced ORE clients. They also support use of
Resource Maps by clients that do not supply preference (<code>Accept</code>)
headers. In response to a request for an Aggregation URI:</p>

<ul>

<li>If the request includes an <code>Accept</code> header then try to
honor the preference (including any Splash Page if HTML is
requested). If the server cannot redirect to the requested format (or
follow lower preferences) then redirect to a machine readable Resource
Map (RDF/XML, Atom, RDFa)</li>

<li>If the request does not include an <code>Accept</code> header then
redirect to a machine readable Resource Map (e.g. RDF/XML, Atom,
XHTML+RDFa).</li>

</ul>

<h4>Recommended client behavior</h4>

<p>If servers follow the rules above, clients will receive a machine
readable Resource Map in response to a request for an Aggregation URI
without preference information.</p>

<ul>

<li>It is recommended that clients include an <code>Accept</code>
header using standard MIME types (see <a href="#mime">appendix B</a>)
to specify their preference for human or machine readable data, and
the specific format.</li>

</ul>


<h3>3. <a name="RedirectNoCN" id="RedirectNoCN">Implementation using
303 redirection without content negotiation</a></h3>

<p>This implementation strategy is RECOMMENDED when:</p>

<ul>
<li>The is just one Resource Map for each Aggregation</li>
<li>Web server support for content negotiation is not available</li>
</ul>

<p>In either the simple case of an Aggregation described by just one
Resource Map, or where content negotiation is not available for
technical reasons, 303 redirection may be used without supporting
content negotiation. Consider the following example Aggregation
(<code>A-1</code>) which is described by one Resource Map
(<code>ReM-1</code>):</p>

<p class="figure"><img src="http-images/RedirectNoCN_1.png" alt="Diagram of one 
resource map using Cool URIs" width="600" height="248" /></p>

<p>The Aggregation, with URI <code>A-1</code>, is described by the
Resource Map <code>ReM-1</code>. Access to <code>A-1</code> SHOULD
lead a user or agent to the Resource Map and this is done by HTTP
redirection.  The server responds to a request for <code>A-1</code>
with a <code>303 See Other</code> redirect to <code>ReM-1</code>. An
example HTTP interaction is shown in <a href="#http_nocn">appendix
C.2</a>.</p>

<p>The URIs <code>A-1</code> and <code>ReM-1</code> do not have to be
related in the manner shown above although this is one logical and
extensible arrangement. While the appropriate choice for a given
system will likely be influenced by other considerations, it should
not be forgotten that <em>"good URIs do not change"</em> [<a
href="#ref-uri-style">URI Style</a>] and that extension is often
required as systems evolve.</p>

<p>This simple single Resource Map 303 redirection arrangement is
easily extended to support additional Resource Maps and/or Splash
Pages using 303 redirection with content negotiation 
(<a href="#RedirectCN">section 2</a>). The URI patterns may be extended 
to support additional Resource Maps. To add and RDF/XML 
<code>ReM-2</code> and a Splash Page <code>S-1</code> one might use:</p>

<div class="exampleInner"><pre>Aggregation:   A-1   = http://example.org/foo
Resource Map:  ReM-1 = http://example.org/foo.atom
               ReM-2 = http://example.org/foo.rdf
Splash Page:   S-1   = http://example.org/foo.html
</pre></div>

<p>Even without support for content negotiation, clients may be made
aware of other Resource Maps by including
<code>ore:isDescribedBy</code> predicates to link to other Resource
Maps in each Resource Map, and by including HTML &lt;link&gt; headers
in the Splash Page. While more limited than a full <a
href="#RedirectCN">content negotiation solution</a>, this arrangement
fulfills the minimal requirement that access to the Aggregation leads
a client to a Resource Map describing the Aggregation.</p>


<h2>4. <a id="Simple" name="Simple">Simple implementation using hash
URIs</a></h2>

<p>This implementation strategy is RECOMMENDED when:</p>

<ul>
<li>The is just one Resource Map for each Aggregation</li>
<li>Web server support for 303 redirection is not available</li>
</ul>

<p>Without support from a web server one cannot use <a
href="#RedirectCN">303 redirection</a> to arrange that an attempt to
access the Aggregation leads to a Resource Map. A way around this
limitation is to use <i>hash URIs</i> &mdash; the Aggregation URI is
constructed by adding a fragment identifier to the Resource Map URI
[<a href="#ref-RFC3986">RFC3986</a>]. In the case of an Atom Resource
Map the URIs might be:</p>

<p class="figure"><img src="http-images/Hash_1.png" alt="Diagram single 
resource maps using hash URIs" width="600" height="256" /></p>
<div class="exampleInner"><pre># Statements in ReM-1 (shown as red arrow)
ReM-1 ore:describes A-1.
</pre></div>

<p>Resolution of fragment identifiers is a client-side behavior so any
client seeing an HTTP URI with fragment identifier, say
<code>uri#fragment</code>, will remove the <code>#fragment</code> and
access <code>uri</code>. Only when a response is obtained might the
client try to identify the correct fragment. In practice this means
that either <code>A-1</code> or <code>ReM-1</code> above will yield
the Resource Map at <code>http://example.org/foo.atom</code>. The use
of a URI with fragment identifier to identify a real-world resource,
such as the Aggregation, is discussed further in <a
href="#ref-CoolURIs">Cool URIs</a> and the <a
href="#ref-linked-data">Linked Data Tutorial</a>.</p>

<p>Use of a hash URI permits precise differentiation between the
Resource Map and the Aggregation so that statements can be made about
the appropriate resource. It also satisfies the requirement that a
Resource Map can be obtained both via the Aggregation URI
<code>A-1</code> and directly from <code>ReM-1</code>. The very simple
HTTP interaction in this case is shown in <a
href="#http_hash">appendix C.3</a>.</p>

<p>If there is an HTML Splash Page (<code>S-1</code>) associated with
the Aggregation then that page SHOULD include an 
<a href="discovery#HTMLLinkElement">HTML &lt;link&gt; element</a>
to support discovery of the Resource Map as shown below, and MAY also
include <a href="discovery#HTTPLinkHeader">HTTP Link headers</a> 
[<a href="#ref-discovery">Resource Map Discovery</a>].</p>

<p class="figure"><img src="http-images/Hash_2.png" alt="Diagram of single Resource Map
using hash URI with HTML discovery links" width="600" height="320" /></p>
<div class="exampleInner"><pre># Statements in ReM-1 (shown as red arrow)
ReM-1 ore:describes A-1.

# In S-1 (shown as blue arrow)
&lt;link rel="alternate" href="http://example.org/foo.atom" type="application/atom+xml" /&gt;
</pre></div>


<h3>4.1 <a name="SimpleMigration">Migration from hash URIs to support
multiple Resource Maps</a></h3>

<p>The use of a hash URIs for the Aggregation URI does not directly
support the availability of multiple Resource Maps for a single
Aggregation.  Migration from this simple approach to more complex
solution with multiple serializations can be accomplished in two ways
described below. Both are imperfect compromises and implementers are
cautioned to think about the possibility of later extension before
selecting the hash URI approach.</p>

<ol>
<li><p>Change URIs to adopt the <a href="#RedirectCN">303 redirection</a> 
strategy. There is no need to change the URI for original the Resource Map
<code>http://example.org/foo.atom</code>. An additional Resource Map may be
added at a new URI, say an RDF/XML Resource Map at 
<code>http://example.org/foo.rdf</code>, to give the following set of 
URIs:</p>
<div class="exampleInner"><pre>Aggregation:   A-1   = http://example.org/foo
Resource Map:  ReM-1 = http://example.org/foo.atom
               ReM-2 = http://example.org/foo.rdf
</pre></div>
<p>With the new URI arrangement, clients attempting to access the old Aggregation 
URI <code>http://example.org/foo.atom#aggregation</code> would still find a 
Resource Map and a sufficiently smart client might be able to unravel the inconsistency
that there is no description of the resource <code>http://example.org/foo.atom#aggregation</code>. 
However, the process may be made explicit by updating the Resource Maps to include
a statement that <code>http://example.org/foo.atom</code> and 
<code>http://example.org/foo.atom#aggregation</code> identify the same resource:</p>
<div class="exampleInner"><pre>&lt;http://example.org/foo&gt;  owl:sameAs  &lt;http://example.org/foo.atom#aggregation&gt;.
</pre></div></li>

<li><p>Preserve existing URIs while adding other formats. If a new 
RDF/XML Resource Map were added at <code>http://example.org/foo.rdf</code> 
the set of URIs might be:</p>
<div class="exampleInner"><pre>Aggregation:   A-1   = http://example.org/foo.atom#aggregation
Resource Map:  ReM-1 = http://example.org/foo.atom
               ReM-2 = http://example.org/foo.rdf
</pre></div>
<p>With this extension it is not possible to provide access to the multiple
Resource Maps by content negotiation on <code>A-1</code>, or to change the
default representation obtained via <code>A-1</code>. Each Resource Map 
would indicate the availability of other Resource Map(s) using the 
<code>ore:isDescribedBy</code> predicate, and a Splash Page would include 
<a href="discovery#HTMLLinkElement">HTML &lt;link&gt; elements</a> to support 
discovery of the Resource Maps, and may also include 
<a href="discovery#HTTPLinkHeader">HTTP Link headers</a>.</p>
</li>
</ol>


<h2>5. <a name="WithRDFa" id="WithRDFa">Implementation with RDFa</a></h2>

<p><a href="#ref-rdfa">RDFa</a> provides means to include structured
data, such as a Resource Map, within an XHTML page. A profile
for the use of RDFa to serialize Resource Maps is given in <a
href="#ref-ore-rdfa">Resource Map Implementation in RDFa</a>. With
embedded RDFa, an (X)HTML "Splash Page" may take on the dual role 
of a Resource Map serialization. A similar approach might be used
with <a href="#ref-ufmt">microformats</a>.</p>

<p>Within the ORE Model, the URIs of all Resource Maps
(<code>ReM-1</code>, <code>ReM-2</code> etc.) MUST be distinct from
the URI of the Aggregation (<code>A-1</code>). Similarly the URI of a
Splash Page (<code>S-1</code>) MUST be distinct from the URI of the
Aggregation. The use of RDFa with 303 redirection is described in <a
href="#RedirectWithRDFa">section 5.1</a>, and the use of RDFa with
hash URIs in <a href="#SimpleWithRDFa">section 5.2</a>.</p>


<h3>5.1 <a name="RedirectWithRDFa" id="RedirectWithRDFa">RDFa with 303
redirection</a></h3>

<p>In the case of a <a href="#RedirectCN">303 redirection</a>
implementation, the (X)HTML page containing the RDFa may be treated in
the same way as a Resource Map in any other format. If the XHTML page
contains the only Resource Map serialization for the Aggregation then
one might have URIs:</p>

<div class="exampleInner"><pre>Aggregation:   A-1   = http://example.org/foo
Resource Map:  ReM-1 = http://example.org/foo.html      (includes RDFa Resource Map)
</pre></div>

<p>where the server responds to a request for <code>A-1</code> with a
303 redirection to <code>ReM-1</code> as described <a
href="#RedirectNoCN">in section 3</a>.</p>

<p>If there are multiple serializations then the default 303 redirect
should be to the XHTML page. This not only fulfills the requirement of
default redirection to a machine readable Resource Map, but will
ensure that a web browser receives the most helpful version of the
Resource Map &mdash; the one embedded in a human readable XHTML
page. If preference information is supplied with the HTTP request, the
server may use content negotiation to serve the most appropriate
Resource Map. If Resource Maps were available in XHTML/RDFa and Atom
then URIs might be:</p>

<p class="figure"><img src="http-images/RDFa_1.png" alt="Diagram of multiple resource
maps with RDFa" width="600" height="440" /></p>
<div class="exampleInner"><pre># Statements in ReM-1 == S-1 (shown as red arrows)
ReM-1 ore:describes A-1.
A-1 ore:isDescribedBy ReM-2.   #discovery of ReM-2 from ReM-1
</pre></div>

<p>This schemes is easily extended to additional Resource Maps by
simply adding new Resource Maps with URI <code>ReM-3</code>, say
<code>http://example.org/foo.rdf</code> for RDF/XML, etc..</p>


<h3>5.2 <a name="SimpleWithRDFa" id="SimpleWithRDFa">RDFa with hash
URIs</a></h3>

<p>In case of a <a href="#Simple">simple implementation using hash
URIs</a>, the XHTML page containing the RDFa Resource Map
serialization must have the Aggregation URI <code>A-1</code>:</p>

<div class="exampleInner"><pre>Aggregation:   A-1   = http://example.org/foo.html#aggregation
Resource Map:  ReM-1 = http://example.org/foo.html
</pre></div>

<p>The RDFa data must be written so that the URIs above are used in
statements. The Aggregation URI is
<code>http://example.org/foo.html#aggregation</code> and not the page
URI <code>http://example.org/foo.html</code>. This is described in
detail in the <a href="rdfa">RDFa User Guide</a> [
<a href="#ref-ore-rdfa">RDFa Resource Maps</a>].</p>


<h2>6. <a name="Proxy" id="Proxy">Proxy URIs</a></h2>

<p>The ORE Model [<a href="#ref-datamodel">Data Model</a>] introduces
<a href="datamodel#Proxy">Proxy URIs</a> which establish <a
href="datamodel#Proxies">Aggregation-specific identities for
Aggregated Resources</a>. From a modelling perspective, Proxy URIs
need only be unique to a specific Aggregation and to a specific
Aggregated Resource, and have these connections indicated with the
appropriate predicates (<code>ore:proxyIn</code>,
<code>ore:proxyFor</code>).  All authoritative Resource Maps that
describe the same Aggregation MUST express the same Proxy URIs for the
Aggregated Resources ([<a href="#ref-datamodel">Data Model</a> section
<a href="datamodel#Resource_Map">3.3</a>).  When implemented using
HTTP, Proxy URIs SHOULD satisfy the additional <a
href="#ProxyRequirements">requirements</a> given below so that clients
dereferencing a Proxy URI will be redirected to the Aggregated
Resource while also being informed of the Aggregation
context. Conveying this information in responses requires server
support.</p>

<p>The <a href="#oreproxy">ORE Proxy URI resolver</a> provides a way
to implement Proxy URIs without the need for <em>local</em> server
support or any registration.  Proxy URIs are constructed as queries to
the resolver which contain both the target Aggregated Resource URI and
Aggregation context URI.</p>


<h3>6.1 <a name="ProxyRequirements" id="ProxyRequirements">Requirements 
for HTTP Proxy URIs</a></h3>

<p>Proxy URIs MUST be unique to a specific Aggregation (<code>A-1</code>) and to
a specific Aggregated Resource (<code>AR-1</code>). They are thus able to "stand
for" the Aggregated Resource in the context of the particular
Aggregation. If an HTTP Proxy URI is used as a reference to an
Aggregated Resources in the context of an Aggregation then it is
desirable that dereferencing it with a standard web browser will
return the Aggregated Resource itself (say a JPEG image or PDF
document). In addition, dereference of the Proxy URI by an ORE aware
client or agent should reveal the Aggregation context. In order to
meet these two requirements, when dereferenced HTTP Proxy URIs
MUST:</p>

<ol>
<li><p><b>Redirect the client to the Aggregated Resource</b> with HTTP
status code &quot;303 See Other&quot; (other 3xx status codes do not
have the correct semantics) and a <code>Location</code> header:</p>
<div class="exampleInner"><pre>Location: <code>AR-1</code>
</pre></div></li>
<li><p><b>Indicate the Aggregation context in the HTTP response</b>
with the <a href="discovery#HTTPLinkHeader">HTTP <code>Link</code>
header</a> which is typed with the <code>aggregation</code>
relation:</p>
<div class="exampleInner"><pre>Link: &lt;A-1&gt;; rel="aggregation"
</pre></div></li>
</ol>

<p>The <a href="#oreproxy">ORE Proxy URI resolver</a> is one
implementation that meets these requirements. The particular syntax
described below could be reused for other Proxy URI resolvers with
different base URIs. With this or other syntaxes, implementers should
note the URI encoding issues mentioned below.</p>


<h3>6.2 <a name="oreproxy" id="oreproxy">ORE Proxy URI resolver at
<code>http://oreproxy.org/r</code></a></h3>

<p>The ORE Proxy URI resolver at <code>http://oreproxy.org/r</code> is
provided as a service to the community. Use of the
<code>http://oreproxy.org/r</code> resolver requires only that Proxy
URIs are constructed by following the syntax rules described
here. There is no need to register new Proxy URIs or Resource Maps or
Aggregations because all of the information needed to implement the <a
href="#ProxyRequirements">Proxy URI requirements</a> given above is
included in the Proxy URI itself. Namely, the URIs of the Aggregated
Resource <code>AR-1</code> and the Aggregation <code>A-1</code> context.  The syntax for
the Proxy URI is:</p>

<div class="exampleInner"><pre>http://oreproxy.org/r?what=AR-1&amp;where=A-1
</pre></div>

<p>and an example might be</p>

<div class="exampleInner"><pre>http://oreproxy.org/r?what=http://example.org/aggregated_resource_456&amp;where=http://example.org/aggregation_123
</pre></div>

<p>Proxy URIs are constructed according to the following rules:</p>
<ul>
<li>The parameters <code>what</code> and <code>where</code> MUST 
be given in the order shown.</li>
<li><p>The URIs of the Aggregated Resource <code>AR-1</code> and of the
Aggregation <code>A-1</code> MUST be appropriately URI encoded as parts
of the query component of the Proxy URI. All except the following 
characters should be percent encoded in <code>A-1</code> and <code>AR-1</code>
when used in the Proxy URI (see URI syntax specification 
[<a href="#ref-RFC3986">RFC3986</a>]):</p>
<div class="exampleInner"><pre>query-non-escaped = ALPHA / DIGIT / "-" / "." / "_" / "~" / ":" / "@" / "/" / "?"
</pre></div>
<p>Note that this means that there MUST be double-escaping of
any <code>%</code> characters that are already used to indicated
percent encoded characters in <code>A-1</code> or <code>AR-1</code>. For example,
if <code>AR-1</code>=<code>http://example.org/aggregated%26resource</code> and 
<code>A-1</code>=<code>http://example.org/aggregation_123</code>, the <code>%</code> 
in <code>%26</code> must be encoded as <code>%25</code>, giving:</p>
<div class="exampleInner"><pre>http://oreproxy.org/r?what=http://example.org/aggregated%2526resource&amp;where=http://example.org/aggregation_123
</pre></div>
<p>Note also that it is essential that the <code>#</code> character be correctly
escaped (as <code>%23</code>) if either <code>A-1</code> or <code>AR-1</code> 
contain a fragment identifier component. If not, a browser would interpret the
<code>#</code> character as the end of the query string and not sent the rest 
of the Proxy URI to the resolver.</p></li>
<li>The scheme and host components SHOULD be specified in
normalized (lowercase) form.</li>
</ul>
<p>All applications except the application creating the Proxy URI and the 
resolver SHOULD treat the Proxy URI as opaque. The rules for parameter order, 
uniform escaping and normalization mean that the same Proxy URI will be 
constructed by different applications for the same <code>AR-1</code> and 
<code>A-1</code>, and thus the Proxy URIs will be understood to identify
the same resource by URI comparison.</p>

<p>When a client dereferences a <code>http://oreproxy.org/r</code>
Proxy URI it will be redirected to the Aggregated Resource <code>A-1</code> and
the Aggregation context will be indicated in an HTTP <code>Link</code>
header as described in the <a href="#ProxyRequirements">Proxy URI
requirements</a> above. Clients that cannot or do not interpret the
<code>Link</code> header, such as an ordinary web browser, will
silently be redirected to the Aggregated Resource. ORE aware clients
will be able to deduce the Aggregation context.</p>


<h2>7. <a id="Trust" name="Trust">Trust and Authority</a></h2>

<p>Notions of trust are notoriously complex, hard to establish, and
yet essential for many applications. The ORE specifications are based
on Web and Semantic Web standards which provide authority rules as a
scaffolding to allow applications to establish trust. In particular,
the ORE Model uses RDF which allows <i>anyone to say anything about
anything</i> although understanding <i>who or what</i> is doing the
saying may help one establish trust (or not). This section outlines
elements of authority determination based on the Aggregation and
Resource Map URIs.</p>

<h3>7.1 <a id="Authority" name="Authority">Authoritative Description</a></h3>

<p>Imagine being given the URI of an Aggregation. How can one find an
authoritative Resource Map describing that aggregation? The Web
Architecture depends upon the URI owner to provide authoritative
descriptions of the resource identified by the URI (see <a
href="http://www.w3.org/TR/webarch/#uri-assignment">URI allocation</a>
in [<a href="#ref-awww">Web Architecture</a>], [<a
href="#ref-linked-data">Linked Data Tutorial</a>]). The ORE
specifications follow this notion. It is expected that an attempt to
dereference the URI of an Aggregation will lead (via one of the
mechanisms described above) to an authoritative Resource Map. A
Resource Map obtained via the Aggregation URI is thus considered an <a
href="datamodel#Resource_Map">authoritative description of the
Aggregation</a> [<a href="#ref-datamodel">ORE Data Model</a>].</p>

<p>Note that even an authoritative Resource Map may contain statements
that are not authoritative in other senses. For example, an Aggregated
Resource may be described as being a JPEG image but dereference of the
Aggregated Resource might lead to an authoritative representation and
HTTP metadata for a PDF document.</p>

 
<h2>8. <a name="References" id="References">References</a></h2>

<dl>
<dt>[<a name="ref-atom" id="ref-atom">Atom Resource Maps</a>]</dt>
<dd><cite><a href="http://www.openarchives.org/ore/1.0/atom">ORE Specification - Representing Resource Maps Using the Atom Syndication Format</a></cite>,
Carl Lagoze, Herbert Van de Sompel, Pete Johnston, Michael Nelson, Robert Sanderson, 
Simeon Warner (editors), 2008-10-17. 
Available at http://www.openarchives.org/ore/1.0/atom</dd>

<dt>[<a name="ref-CoolURIs" id="ref-CoolURIs">Cool URIs</a>]</dt>
<dd><cite><a href="http://www.w3.org/TR/2008/NOTE-cooluris-20080331/">Cool 
URIs for the Semantic Web</a></cite> Leo Sauermann, Richard Cyganiak, Danny 
Ayers, Max V&#xf6;lkel, 2008-03-31. Available at
http://www.w3.org/TR/2008/NOTE-cooluris-20080331/ and latest version
at http://www.w3.org/TR/cooluris/</dd>

<dt>[<a name="ref-datamodel" id="ref-datamodel">Data Model</a>]</dt>
<dd><cite><a href="http://www.openarchives.org/ore/1.0/datamodel">ORE Specification - 
Abstract Data Model</a></cite>,
Carl Lagoze, Herbert Van de Sompel, Pete Johnston, Michael Nelson, Robert Sanderson, 
Simeon Warner (editors), 2008-10-17.
Available at http://www.openarchives.org/ore/1.0/datamodel</dd>

<dt>[<a name="ref-iana-mime" id="ref-iana-mime">IANA MIME</a>]</dt>
<dd><cite><a href="http://www.iana.org/assignments/media-types/">IANA MIME Media Types</a></cite>,
Accessed 2008-10-06. 
Available at http://www.iana.org/assignments/media-types/</dd>

<dt>[<a name="ref-linked-data" id="ref-linked-data">Linked Data
Tutorial</a>]</dt> <dd><cite><a
href="http://www4.wiwiss.fu-berlin.de/bizer/pub/LinkedDataTutorial/20070727/">How
to Publish Linked Data on the Web</a></cite>, Chris Bizer, Richard
Cyganiak, Tom Heath, 2007-07-27.  Available at
http://www4.wiwiss.fu-ber\lin.de/bizer/pub/LinkedDataTutorial/20070727/
. Latest version available at
http://www4.wiwiss.fu-berlin.de/bizer/pub/LinkedDataTutorial/</dd>

<dt>[<a name="ref-discovery" id="ref-discovery">Resource Map Discovery</a>]</dt>
<dd><cite><a href="http://www.openarchives.org/ore/1.0/discovery">ORE Specification - 
Resource Map Discovery</a></cite>,
Carl Lagoze, Herbert Van de Sompel, Pete Johnston, Michael Nelson, Robert Sanderson, 
Simeon Warner (editors), 2008-10-17.
Available at http://www.openarchives.org/ore/1.0/discovery</dd>

<dt>[<a name="ref-RFC2295" id="ref-RFC2295">RFC2295</a>]</dt>
<dd><cite>IETF <a href="http://www.ietf.org/rfc/rfc2295.txt">RFC 2295:
Transparent Content Negotiation</a></cite>,
K. Holtman, A. Mutz, 1998-03.
Available at http://www.ietf.org/rfc/rfc2295.txt</dd>

<dt>[<a name="ref-RFC2616" id="ref-RFC2616">RFC2616</a>]</dt>
<dd><cite>IETF <a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616: 
Hypertext Transfer Protocol - HTTP/1.1</a></cite>,
R. Fielding, J. Gettys, J. Mogul, H. Frystyk, L. Masinter, P. Leach, T. Berners-Lee, June 1999. 
Available at http://www.ietf.org/rfc/rfc2616.txt</dd>

<dt>[<a name="ref-RFC3986" id="ref-RFC3986">RFC3986</a>]</dt>
<dd><cite>IETF <a href="http://www.ietf.org/rfc/rfc3986.txt">RFC 3986: 
Uniform Resource Identifier (URI): Generic Syntax</a></cite>, 
T. Berners-Lee, R. Fielding, L. Masinter. 
Available at http://www.ietf.org/rfc/rfc3986.txt</dd>

<dt>[<a name="ref-rdfa" id="ref-rdfa">RDFa</a>]</dt>
<dd><cite><a href="http://www.w3.org/TR/2007/WD-rdfa-syntax-20071018/">RDFa in XHTML: 
Syntax and Processing.  A collection of attributes and processing rules for 
extending XHTML to support RDF</a></cite>, 
Ben Adida, Mark Birbeck, Shanne McCarron and Steven Pemberton (editors). 
W3C Working Draft, 2007-10-18.
Available at http://www.w3.org/TR/2007/WD-rdfa-syntax-20071018/ and 
<a href="http://www.w3.org/TR/rdfa-syntax/">latest version</a> available
at http://www.w3.org/TR/rdfa-syntax/</dd>

<dt>[<a name="ref-ore-rdfa" id="ref-ore-rdfa">RDFa Resource Maps</a>]</dt>
<dd><cite><a href="http://www.openarchives.org/ore/1.0/rdfa">ORE User Guide - 
Resource Map Implementation in RDFa</a></cite>,
Carl Lagoze, Herbert Van de Sompel, Pete Johnston, Michael Nelson, Robert Sanderson, 
Simeon Warner (editors), 2008-10-17.
Available at http://www.openarchives.org/ore/1.0/rdfa</dd>

<dt>[<a name="ref-uri-style" id="ref-uri-style">URI Style</a>]</dt>
<dd><cite><a href="http://www.w3.org/Provider/Style/URI">Cool URIs don't change</a></cite>, 
Tim Berners-Lee, 1998.
Available at http://www.w3.org/Provider/Style/URI</dd>

<dt>[<a name="ref-awww" id="ref-awww">Web Architecture</a>]</dt>
<dd><a href="http://www.w3.org/TR/webarch/"><em>Architecture of
the World Wide Web, Volume One</em></a>, I. Jacobs and N. Walsh,
Editors, World Wide Web Consortium, 15 January 2004. Available at
http://www.w3.org/TR/webarch/</dd>

<dt>[<a name="ref-xhtml-mime" id="ref-xhtml-mime">XHTML Media Types</a>]</dt>
<dd><cite><a href="http://www.w3.org/TR/xhtml-media-types">XHTML Media Types</a></cite>, 
Ishikawa Masayasu, 2002.
Available at http://www.w3.org/TR/xhtml-media-types</dd>

</dl>
</div>

<div class="back">
<!--START-INCLUDE=_acknowledgements.inc-->
<div class="body">
<h2><a name="acknowledgments" id="acknowledgments"></a>A. Acknowledgements</h2>
<p>This document is the work of the
<a href="http://openarchives.org">Open Archives Initiative</a>. Funding 
for Open Archives Initiative Object Reuse and Exchange is provided by 
the <a href="http://mellon.org/">Andrew W. Mellon Foundation</a>,
<a href="http://microsoft.com/">Microsoft</a>, and the
<a href="http://nsf.gov">National Science Foundation</a>.&nbsp; Additional 
support is provided by the <a href="http://www.cni.org">Coalition for 
Networked Information</a>.</p>
<p>This document is based on meetings of the
<a href="http://www.openarchives.org/ore/ORE_Community.php#OAI-ORE_Technical_Committee">
OAI-ORE Technical Committee</a> (ORE-TC), with participation from the
<a href="http://www.openarchives.org/ore/ORE_Community.php#OAI-ORE_Liaison_Group">
OAI-ORE Liaison Group</a> (ORE-LG).&nbsp; Members of the ORE-TC are: 
Chris Bizer (Freie Universit&#228;t Berlin), Les Carr (University of Southampton), Tim DiLauro 
(Johns Hopkins University), Leigh Dodds (Ingenta), David Fulker (UCAR), Tony Hammond 
(Nature Publishing Group), Pete Johnston (Eduserv Foundation), Richard 
Jones (Imperial College), Peter Murray (OhioLINK), Michael Nelson (Old 
Dominion University), Ray Plante (NCSA and National Virtual 
Observatory), Rob Sanderson (University of Liverpool), Simeon Warner 
(Cornell University), and Jeff Young (OCLC).&nbsp; Members of ORE-LG are: 
Leonardo Candela (DRIVER), Tim Cole (DLF Aquifer and UIUC Library), 
Julie Allinson (JISC), Jane Hunter (DEST), Savas Parastatidis&nbsp; 
(Microsoft), Sandy Payette (Fedora Commons), Thomas Place (DARE and 
University of Tilburg), Andy Powell (DCMI), and Robert Tansley (Google, 
Inc. and DSpace)</p>
<p>We also acknowledge comments from the
<a href="http://www.openarchives.org/ore/ORE_Community.php#OAI-ORE_Advisory_Committee">
OAI-ORE Advisory Committee</a> (ORE-AC).</p>
</div>
<!--END-INCLUDE=_acknowledgements.inc-->

<h2>B. <a id="mime" name="mime">Common MIME types for Resource Maps and Splash Pages</a></h2>

<p>The table below lists the standard MIME types [<a
href="#ref-iana-mime">IANA MIME</a>] for Resource Map
serializations. Servers providing ORE Resource Maps SHOULD follow
these standards so the clients may request appropriate formats using
HTTP <code>Accept:</code> headers without need for specific knowledge
of the server configuration.</p>

<table summary="Table of commonly used MIME types for Resource Maps">
<tbody>
<tr>
 <th>Resource Map Type</th>
 <th>MIME type</th>
</tr>
<tr>
 <td>Atom</td>
 <td><code>application/atom+xml</code></td>
</tr>
<tr>
 <td>RDF/XML</td>
 <td><code>application/rdf+xml</code></td>
</tr>
<tr>
 <td>RDFa in XHTML</td>
 <td><code>application/xhtml+xml</code></td>
</tr>
</tbody>
</table>

<p>Thus, if a client would prefer RDF/XML but can also parse Atom then it might
use the following HTTP header in requests:</p>

<div class="exampleInner"><pre>Accept: application/rdf+xml, application/atom+xml;q=0.5
</pre></div>

<p>The table below list the two common MIME types for HTML/XHTML Splash Pages
following the W3C <a href="#ref-xhtml-mime">XHTML Media Types</a>
recommendations.</p>
 
<table summary="Table of commonly used MIME types for Splash Pages">
<tbody>
<tr>
 <th>Resource Map Type</th>
 <th>MIME type</th>
</tr>
<tr>
 <td>XHTML</td>
 <td><code>application/xhtml+xml</code></td>
</tr>
<tr>
 <td>HTML (legacy)</td>
 <td><code>text/html</code></td>
</tr>
</tbody>
</table>

<p>Thus, if a client wishes to receive a Splash Page from the
Aggregation URI and prefers XHTML to HTML then it might use the
following HTTP header in requests:</p>

<div class="exampleInner"><pre>Accept: application/xhtml+xml, text/html;q=0.5
</pre></div>

<p>Note that there is unfortunately no way to distinguish a plain
XHTML document from an XHTML+RDFa document based on MIME type. It is thus
not possible for a client to request an XHTML+RDFa Resource Map in
preference to an RDF/XML or Atom Resource Map without running the
risk of a server correctly returning a plain XHTML Splash Page (without
included RDFa) in response.</p>


<h2><a id="http_examples" name="http_examples">C. Example HTTP requests and responses</a></h2>

<p>This appendix shows simplified sequences of HTTP requests and
responses for the implementation strategies in this document. HTTP
responses will usually include a number of other headers that have
been omitted for clarity (e.g. <code>Date</code>, <code>Server</code>,
<code>Conection</code>).</p>

<h3><a id="http_cn" name="http_cn">C.1 303 redirection with content negotiation</a></h3>

<p>If a server supports content negotiation on the Aggregation URI,
the client may be redirected to different Resource Maps depending on
the preferences expressed in the request. If no preference is
expressed then the request and response sequence for the Aggregation
<code>http://example.org/foo</code> would be the same as shown in <a
href="#http_nocn">example C.2</a>, without content
negotiation. However, consider the request below where the client
expresses a preference for RDF (assumed <code>q=1.0</code> for MIME
type <code>application/rdf+xml</code> is greater than
<code>q=0.5</code> for <code>application/atom+xml</code>):</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo HTTP/1.1
            Host: example.org
            Accept: application/rdf+xml, application/atom+xml;q=0.5
</pre><pre class="response">
(response)  HTTP/1.1 303 See Other
            Location: http://example.org/foo.rdf
            Vary: Accept
</pre></div>

<p>The response is a 303 redirect to the RDF Resource Map
<code>http://example.org/foo.rdf</code> instead of the Atom
serialization. (Note that other <code>3xx</code> status codes 
do not have the correct semantics.)</p>

<p>The <code>Vary</code> header in the response indicates
that there was content negotiation based on the <code>Accept</code>
header of the request. This is necessary for correct operation of
caches.</p>

<p>The client will understand the 303 redirect and then request the
resource indicated:</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo.rdf HTTP/1.1
            Host: example.org
</pre><pre class="response">
(response)  HTTP/1.1 200 OK
            Content-Type: application/rdf+xml
            Length: 2345

            &lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        xmlns:ore="http://www.openarchives.org/ore/terms/"&gt;
              ...
            &lt;/rdf:RDF&gt;
</pre></div>

<p>Which in this case yields the RDF/XML Resource Map in the <code>200
OK</code> response.</p>

<p>As a second example, consider the case that a client expresses a
preference for a Splash Page by including accept headers for XHTML
(<code>application/xhtml+xml</code>) and HTML
(<code>text/html</code>):</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo HTTP/1.1
            Host: example.org
            Accept: application/xhtml+xml, text/html;q=0.5
</pre><pre class="response">
(response)  HTTP/1.1 303 See Other
            Location: http://example.org/foo.html
            Vary: Accept
</pre></div>

<p>The response is a 303 redirect to the HTML Splash page. If no HTML
page were available for Aggregation
<code>http://example.org/foo</code> then the response would be instead
to the default Resource Map format, say RDF/XML:</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo HTTP/1.1
            Host: example.org
            Accept: application/xhtml+xml, text/html;q=0.5
</pre><pre class="response">
(response)  HTTP/1.1 303 See Other
            Location: http://example.org/foo.rdf
            Vary: Accept
</pre></div>


<h3><a id="http_nocn" name="http_nocn">C.2 303 redirection without content negotiation</a></h3>

<p>In the case of <a href="#RedirectCN">303 redirection</a> where
there is either just a single Resource Map available, or multiple
Resource Maps available but the server does not support content
negotiation or the client does not express a preference, then there
will be a straightforward request and response with 303
redirection. Consider a request for the Aggregation
<code>http://example.org/foo</code>:</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo HTTP/1.1
            Host: example.org
</pre><pre class="response">
(response)  HTTP/1.1 303 See Other
            Location: http://example.org/foo.atom
</pre></div>

<p>The client will understand the 303 redirect and then request the
resource indicated:</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo.atom HTTP/1.1
            Host: example.org
</pre><pre class="last_response">
(response)  HTTP/1.1 200 OK
            Content-Type: application/atom+xml
            Length: 1234

            &lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;entry xmlns="http://www.w3.org/2005/Atom"&gt;
              ...
            &lt;/entry&gt;
</pre></div>

<p>The response header <code>200 OK</code> indicates that the resource
requested is a web document and the body of the response is the
Atom Resource Map.</p>


<h3><a id="http_hash" name="http_hash">C.3 Use of hash URIs</a></h3>

<p>If the Aggregation URI a is hash URI with a fragment identifier
such as <code>http://example.org/foo.atom#aggregation</code>, then the
browser (or other client) will automatically truncate the URI at the
hash. It will then issue a request for the resource
<code>http://example.org/foo.atom</code> in the normal way. The
sequence of HTTP request and response is thus very simple and the
Resource Map is returned in the <code>200 OK</code> response:</p>

<div class="exampleInner"><pre class="request">
(request)   GET /foo.atom HTTP/1.1
            Host: example.org
</pre><pre class="response">
(response)  HTTP/1.1 200 OK
            Content-Type: application/atom+xml
            Length: 1234

            &lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;entry xmlns="http://www.w3.org/2005/Atom"&gt;
              ...
            &lt;/entry&gt;
</pre></div>


<div class="changelog">
<h2><a name="changelog" id="changelog"></a>D. Change Log</h2>
<table class="changelog" summary="change log">
       <tbody><tr>
                <th>Date</th>
                <th>Editor</th>
                <th>Description</th>
        </tr>
	<tr>
		<td>2008-10-17</td>
		<td>simeon</td>
		<td>public 1.0 release</td>
	</tr>
	<tr>
		<td>2008-06-02</td>
		<td>simeon</td>
		<td>public beta 0.9 release</td>
	</tr>
	<tr>
		<td>2008-04-02</td>
		<td>simeon</td>
		<td>public alpha 0.3 release</td>
	</tr></tbody>
</table>
</div>

</div>
<!--START-FOOTER-->
<div id="license">
<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"/></a><br/>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 Unported License</a>.</p>
</div>

<div id="tracker">
<p style="font-size: 60%">Use of this page is tracked to collect anonymous traffic data.
See <a href="/privacy">OAI privacy policy</a>.
</p>
</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2976056-3";
urchinTracker();
</script>
</body>
</html>
